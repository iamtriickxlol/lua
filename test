repeat wait() until game:IsLoaded()

if game.PlaceId == 17047374266 then
	print("loaded")
	local plr = game.Players.LocalPlayer
	local boss
	local lapse = tick()
	_G.a = true
	_G.win = false
	_G.spawned = false
	game.Workspace.Entities.ChildAdded:Connect(function(v)
	
		print(v)
		if v.Name ~= plr.Name and v:GetAttribute("EntityType") and v.Name ~= "Wolf" or string.find(v.Name, "_") or v:GetAttribute("EntityType") == "Shinigami" or v:GetAttribute("EntityType") == "Quincy"  then
			
			boss = v
			
			local hum = boss:WaitForChild("Humanoid")
			print(tostring(boss.Humanoid.Health))	
			local c 
			c = game:GetService("RunService").Heartbeat:Connect(function()
				if _G.a == true then
					if boss:GetAttribute("CurrentState") == "Unconscious" then
						print("Boss is dead")
						c:Disconnect()
						c = nil
						wait(1)
						plr.Character.HumanoidRootPart.CFrame =  boss.HumanoidRootPart.CFrame
						wait(.3)
						game:GetService("Players").LocalPlayer.Character.CharacterHandler.Remotes.Execute:FireServer()
						
						return	
					end

					if boss:GetAttribute("CurrentState") or boss:GetAtribute("BankaiMeter") then
						boss:SetAttribute("CurrentState", "Action")
						boss:SetAttribute("SkillRange", 0)
						boss:SetAttribute("Posture", 50)
						boss:SetAttribute("BankaiMeter", 0)
						boss:SetAttribute("MaxBankaiMeter", 0)
						boss:SetAttribute("Reiatsu", 0)
						boss:SetAttribute("MaxReiatsu", 0)
						boss:SetAttribute("DeflectFrames", false)
						boss:SetAttribute("BlockFrames", false)
						boss:SetAttribute("EvasiveFrames", false)
						boss:SetAttribute("HyperArmor", false)
						boss:SetAttribute("IFrames", false)
						boss:SetAttribute("ShikaiCD", true)
						boss:SetAttribute("SkillCD", true)
						boss:SetAttribute("One", false)
						boss:SetAttribute("Two", false)
						boss:SetAttribute("Three", false)
						boss:SetAttribute("Four", false)
						boss:SetAttribute("Five", false)
						boss:SetAttribute("Six", false)
						boss:SetAttribute("Seven", false)
						boss:SetAttribute("Seven", false)

						boss:SetAttribute("CriticalCooldown", true)

						boss.Humanoid.WalkSpeed = 0
						boss.Humanoid.JumpHeight = 0
					end

					plr.Character.HumanoidRootPart.CFrame =  boss.HumanoidRootPart.CFrame* CFrame.new(0,9,0) *CFrame.Angles(math.rad(-90),0,math.rad(90))

					if plr.Character:GetAttribute("One") ~= true then
						-- Script generated by SimpleSpy - credits to exx#9394

						local args = {
							[1] = "Skill",
							[2] = "One",
							[3] = "Pressed"
						}

						game:GetService("ReplicatedStorage").Remotes.ServerCombatHandler:FireServer(unpack(args))
					else
						local args = {
							[1] = "LightAttack"
						}

						game:GetService("ReplicatedStorage").Remotes.ServerCombatHandler:FireServer(unpack(args))
					end


					local args = {
						[1] = "LightAttack"
					}

					game:GetService("ReplicatedStorage").Remotes.ServerCombatHandler:FireServer(unpack(args))

				end

				wait()
			end)
		else
			print(v.Name.." spawned")
		end
		
	end)


	local item
	game.Players.LocalPlayer.PlayerGui.ChildAdded:Connect(function(v)
		local timelapsed = (tick()-lapse)
		if v:IsA("ScreenGui") then
			for i2,v2 in pairs(v.Parent:GetDescendants()) do
				if v2:IsA("TextLabel") then
					if string.find(v2.Text, "obtained.") then
						_G.win = true
						local nitem = string.gsub(v2.Text,"obtained.", "")
						item = nitem					
						httpservice = game:GetService("HttpService")						
						local response = request({
							Url = "https://discord.com/api/webhooks/1238810228531920916/6vZ7ZZi0-SD4ofWPzviKcJfkaJXORh1W-mdwy3DvmWalQ5xAZsWWgshrZKsAYTSIaSpI",
							Method = "POST",
							Headers = {
								["Content-Type"] = 'application/json'
							},
							Body = httpservice:JSONEncode({
								["content"] = "",
								["embeds"] = {{
									["title"] = "RAID BOSS WIN!",
									["description"] = "**Username: **"..game.Players.LocalPlayer.DisplayName.." \n **Item:** "..item,
									["type"] = "rich",
									["color"] = tonumber(0xd9abd7),
									["footer"] = {
										["text"] = "Meta Hub",
									}
								}}
							})
						})
					end
				end
			end
		end
	end)
	
	game.Workspace.Entities.ChildRemoved:Connect(function(v)

		if v.Name == boss.Name and _G.win == false then
			print(_G.win)
			httpservice = game:GetService("HttpService")

			local response = request({
				Url = "https://discord.com/api/webhooks/1238810228531920916/6vZ7ZZi0-SD4ofWPzviKcJfkaJXORh1W-mdwy3DvmWalQ5xAZsWWgshrZKsAYTSIaSpI",
				Method = "POST",
				Headers = {
					["Content-Type"] = 'application/json'
				},
				Body = httpservice:JSONEncode({
					["content"] = "",
					["embeds"] = {{
						["title"] = "ERROR",
						["description"] = "**Reason:** Boss was bugged or timer ran out",
						["type"] = "rich",
						["color"] = tonumber(0xeb4034),
						["footer"] = {
							["text"] = "Meta Hub",
						}
					}}
				})
			})
			
			local args = {
				[1] = "Karakura Town",
			}

			game:GetService("Players").LocalPlayer.Character.CharacterHandler.Remotes.ServerListTeleport:FireServer(unpack(args))
		end
	end)
end

game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = 
